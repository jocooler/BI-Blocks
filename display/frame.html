<style>
	.show-short .extended {
		display:none;
	}
	.show-extended .short {
		display:none;
	}
	.show-nano .short, .show-nano .extended {
		display:none;
	}
	.show-extended {
		display:flex;
	}
	.show-short iframe, iframe {
		width:100%;
		height:300px;
		display:block;
		border:0px;
	}
	.show-extended iframe {
		height:500px;
	}
	.brick {
		transition: width 300ms, height 300ms;
	}
	.btn-primary {
		float:right;
	}
</style>


<div class="card-block">
	<h4>{{title}}</h4>
	<hr />
	<div class="card-text" id="block{{blockid}}">
		<div class="row">
			<iframe frameless="true" src="{{query}}"></iframe>
		</div>
		<p class="card-text short">{{short}}</p>
		<div class="card-text extended"><p>{{{extended}}}</p></div>
		<button class="btn btn-primary short" onclick="showExtended(this)">Learn More</button>
		<button class="btn btn-primary extended"onclick="showShort(this)">Less</button>
	</div>
</div>
<div class="card-footer">
	<small class="text-muted">Tags: </small>
  {{#tags}}
	<small class="text-muted brick-tag">{{.}}</small>
  {{/tags}}
  <br/>
  {{#icons}}
	{{{.}}}
  {{/icons}}
</div>

<script>
function showExtended(el) {
	var $el = $(el).parents('.brick');
	$el.removeClass('show-nano').removeClass('show-short').addClass('show-extended');
	setTimeout(function () {
		$('html, body').animate({
			scrollTop: $el.offset().top
		}, 250);
	},
	300);
}

function showShort(el) {
	var $el = $(el).parents('.brick');
	$el.removeClass('show-nano').addClass('show-short').removeClass('show-extended');
}

function showNano(el) {
	var $el = $(el).parents('.brick');
	$el.addClass('show-nano').removeClass('show-short').removeClass('show-extended');
}
</script>
